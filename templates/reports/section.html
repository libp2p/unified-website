{% extends "base.html" %}
{% import "macros.html" as macros %}

{% block title %}{{ section.title }}{% endblock %}

{% block body_class %}reports{% endblock %}
{% block main_class %}reports-layout{% endblock %}

{% block content %}
{# Sidebar Component - shown on all pages #}
{% include "components/reports-sidebar.html" %}

{% if section.relative_path == "reports/_index.md" %}
{# Landing page for reports - simple description page #}
<div class="reports-main">
    <div class="reports-content">
        <article class="reports-article">
            <header class="report-header">
                <h1 class="report-header__title">{{ section.title }}</h1>
                {% if section.description %}
                <p class="report-header__description">{{ section.description }}</p>
                {% endif %}
            </header>

            {% if section.content %}
            <div class="report-content prose">
                {{ section.content | safe }}
            </div>
            {% endif %}
        </article>
    </div>
</div>
{% else %}
{# Subsection page #}

<div class="reports-main">
    <div class="reports-content">
        <article class="reports-article">
            {# Breadcrumbs #}
            <nav class="breadcrumbs" aria-label="Breadcrumb">
                <span class="breadcrumbs__item">
                    <a href="{{ config.base_url }}/reports/">Reports</a>
                </span>
                <span class="breadcrumbs__separator">/</span>
                <span class="breadcrumbs__item">{{ section.title }}</span>
            </nav>

            <header class="report-header">
                <h1 class="report-header__title">{{ section.title }}</h1>
                {% if section.description %}
                <p class="report-header__description">{{ section.description }}</p>
                {% endif %}
            </header>

            {% if section.content %}
            <div class="report-content prose">
                {{ section.content | safe }}
            </div>
            {% endif %}

            {# List pages in this section #}
            {% if section.pages | length > 0 %}
            <div class="section-pages">
                <h2>In this section</h2>
                <ul class="page-list">
                    {% for page in section.pages %}
                        <li>
                            <a href="{{ macros::rel_link(permalink=page.permalink) }}">
                                <strong>{{ page.title }}</strong>
                                {% if page.description %}
                                    <span>{{ page.description }}</span>
                                {% endif %}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
            {% else %}
            <p class="reports-empty">No reports in this section yet. Check back soon.</p>
            {% endif %}
        </article>
    </div>
</div>
{% endif %}
{% endblock %}
