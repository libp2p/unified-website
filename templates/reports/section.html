{% extends "base.html" %}
{% import "macros.html" as macros %}

{% block title %}{{ section.title }}{% endblock %}

{% block body_class %}reports{% endblock %}
{% block main_class %}reports-layout{% endblock %}

{% block content %}
{% if section.relative_path == "reports/_index.md" %}
{# Landing page for reports #}
<div class="reports-landing">
    <header class="reports-landing__header">
        <h1>{{ section.title }}</h1>
        {% if section.description %}
        <p>{{ section.description }}</p>
        {% endif %}
    </header>

    <div class="reports-landing__sections">
        {% for subsection_path in section.subsections %}
            {% set subsection = get_section(path=subsection_path) %}
            <a href="{{ macros::rel_link(permalink=subsection.permalink) }}" class="reports-section-card">
                <div class="reports-section-card__icon">
                    {% if "annual-reports" in subsection.path %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    {% elif "roadmaps" in subsection.path %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"></polygon>
                        <line x1="9" y1="3" x2="9" y2="18"></line>
                        <line x1="15" y1="6" x2="15" y2="21"></line>
                    </svg>
                    {% elif "research" in subsection.path %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="16" x2="12" y2="12"></line>
                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                    </svg>
                    {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                    </svg>
                    {% endif %}
                </div>
                <h2 class="reports-section-card__title">{{ subsection.title }}</h2>
                {% if subsection.description %}
                <p class="reports-section-card__description">{{ subsection.description }}</p>
                {% endif %}
                <span class="reports-section-card__count">
                    {{ subsection.pages | length }} {% if subsection.pages | length == 1 %}report{% else %}reports{% endif %}
                </span>
            </a>
        {% endfor %}
    </div>
</div>
{% else %}
{# Subsection page - show with sidebar #}
{% include "components/reports-sidebar.html" %}

<div class="reports-main">
    <div class="reports-content">
        <article class="reports-article">
            {# Breadcrumbs #}
            <nav class="breadcrumbs" aria-label="Breadcrumb">
                <span class="breadcrumbs__item">
                    <a href="{{ config.base_url }}/reports/">Reports</a>
                </span>
                <span class="breadcrumbs__separator">/</span>
                <span class="breadcrumbs__item">{{ section.title }}</span>
            </nav>

            <header class="report-header">
                <h1 class="report-header__title">{{ section.title }}</h1>
                {% if section.description %}
                <p class="report-header__description">{{ section.description }}</p>
                {% endif %}
            </header>

            {% if section.content %}
            <div class="report-content prose">
                {{ section.content | safe }}
            </div>
            {% endif %}

            {# List pages in this section #}
            {% if section.pages | length > 0 %}
            <div class="section-pages">
                <h2>In this section</h2>
                <ul class="page-list">
                    {% for page in section.pages %}
                        <li>
                            <a href="{{ macros::rel_link(permalink=page.permalink) }}">
                                <strong>{{ page.title }}</strong>
                                {% if page.description %}
                                    <span>{{ page.description }}</span>
                                {% endif %}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
            {% else %}
            <p class="reports-empty">No reports in this section yet. Check back soon.</p>
            {% endif %}
        </article>
    </div>
</div>
{% endif %}
{% endblock %}
